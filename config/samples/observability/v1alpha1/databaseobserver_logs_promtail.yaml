# example
apiVersion: observability.oracle.com/v1alpha1
kind: DatabaseObserver
metadata:
  name: obs-sample
spec:
  database:
    dbUser:
      key: "username"
      secret: db-secret

    dbPassword:
      key: "password"
      secret: db-secret

    dbConnectionString:
      key: "connection"
      secret: db-secret

  wallet:
    secret: instance-wallet

  sidecar:
    containers:
      - name: promtail
        image: grafana/promtail
        args:
          - -config.file=/etc/promtail/promtail.yaml
        volumeMounts:
          - name: config
            mountPath: /etc/promtail
          - name: log-volume
            mountPath: /log
    volumes:
      - name: config
        configMap:
          name: promtail-sidecar-config

  deployment:
    image: "container-registry.oracle.com/database/observability-exporter:1.5.1"
    args: [ "--log.level=info" ]
    commands: [ "/oracledb_exporter" ]

  serviceMonitor:
    labels:
      release: prometheus
  metrics:
    configMap:
      - name: "devcm-oradevdb-config"
        key: "config.toml"

  log:
    destination: "/log"
    filename: "alert.log"

  replicas: 1

